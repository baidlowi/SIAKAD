"use strict";define(["jquery","core/ajax","core/notification","local_edwiserform/jquery.dataTables","local_edwiserform/dataTables.bootstrap4","local_edwiserform/fixedColumns.bootstrap4","./iefixes","local_edwiserform/formbuilder"],function(e,t,o){return{init:function(){var r={DELETE_FORM:function(e){return t.call([{methodname:"edwiserform_delete_form",args:{id:e}}])[0]},GET_FORMS:function(e,o,r,l){return t.call([{methodname:"edwiserform_get_forms",args:{search:e,start:o,length:r,order:l}}])[0]},ENABLE_DISABLE_FORM:function(e,o){return t.call([{methodname:"edwiserform_enable_disable_form",args:{id:e,action:o}}])[0]}},l=null;e(document).ready(function(t){if(0!=e(".efb-wrap-list").data("sesskey")){e(".efb-wrap-list").data("sesskey");l=e("#efb-forms").DataTable({paging:!0,ordering:!0,bProcessing:!0,bServerSide:!0,rowId:"DT_RowId",bDeferRender:!0,scrollY:"400px",scrollX:!0,scrollCollapse:!0,fixedColumns:{leftColumns:1,rightColumns:1},classes:{sScrollHeadInner:"efb_dataTables_scrollHeadInner"},dom:'<"efb-top"<"efb-listing"l><"efb-list-filtering"f>>t<"efb-bottom"<"efb-form-list-info"i><"efb-list-pagination"p>><"efb-shortcode-copy-note">',columns:[{data:"title"},{data:"type"},{data:"shortcode",orderable:!1},{data:"author"},{data:"created"},{data:"author2"},{data:"modified"},{data:"actions",orderable:!1}],language:{sSearch:M.util.get_string("search-form","local_edwiserform"),emptyTable:M.util.get_string("heading-listforms-empty","local_edwiserform"),info:M.util.get_string("heading-listforms-showing","local_edwiserform",{start:"_START_",end:"_END_",total:"_TOTAL_"}),infoEmpty:M.util.get_string("heading-listforms-showing","local_edwiserform",{start:"0",end:"0",total:"0"})},ajax:function(e,t,l){r.GET_FORMS(e.search.value,e.start,e.length,e.order[0]).done(function(e){t(e)}).fail(o.exception)},fnRowCallback:function(t,o,r,l){e("td:eq(0)",t).addClass("efb-tbl-col-title"),e("td:eq(1)",t).addClass("efb-tbl-col-type"),e("td:eq(2)",t).addClass("efb-tbl-col-shortcode").attr("title",M.util.get_string("clickonshortcode","local_edwiserform")),e("td:eq(3)",t).addClass("efb-tbl-col-create"),e("td:eq(4)",t).addClass("efb-tbl-col-modified"),e("td:eq(5)",t).addClass("efb-tbl-col-action-list")},drawCallback:function(t){e(".efb-csv-export").removeClass("dt-button").off(),e(".efb-shortcode-copy-note").html(M.util.get_string("note","local_edwiserform")+" "+M.util.get_string("clickonshortcode","local_edwiserform"))}})}e("body").on("click",".efb-form-delete",function(t){t.preventDefault();var i=e(this).data("formid"),a=l.row(this).data().title;Formeo.dom.multiActions("warning",M.util.get_string("warning","local_edwiserform"),"<h5>"+M.util.get_string("delete-form-and-data","local_edwiserform",{title:a,id:i})+"</h5>",[{title:M.util.get_string("proceed","local_edwiserform"),type:"danger",action:function(){r.DELETE_FORM(i).done(function(e){1==e.status&&l.draw()}).fail(o.exception)}},{title:M.util.get_string("cancel","local_edwiserform"),type:"success"}])});e("body").on("click",".efb-form-export",function(t){t.preventDefault();var o,r=M.util.get_string("hey-wait","local_edwiserform"),l=M.util.get_string("form-action-export-title","local_edwiserform"),i=M.util.get_string("export-pro-message","local_edwiserform");i=M.util.get_string("profeaturemessage","local_edwiserform",{type:r+"! <b>"+l+"</b>",message:i}),Formeo.dom.multiActions("success",M.util.get_string("upgrade","local_edwiserform"),"<h5>"+i+'</h5><div><iframe class="efb-pro-demo" src="'+(o="export",videotypes.hasOwnProperty(o)?videotypes[o]:videotypes.default)+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>',[{title:M.util.get_string("proceed","local_edwiserform"),type:"success",action:function(){window.open(e("#upgrade-url").val())}},{title:M.util.get_string("cancel","local_edwiserform"),type:"secondary"}])}),e("body").on("click",".efb-enable-disable-form",function(t){!function(t){var o=e(t).data("formid");r.ENABLE_DISABLE_FORM(o,!e(t).is(":checked")).done(function(o){o.status?e(t).prop("checked",e(t).is(":checked")):e(t).prop("checked",!e(t).is(":checked")),e(t).parent().attr("title",e(t).is(":checked")?e(t).data("disable-title"):e(t).data("enable-title"))}).fail(function(e){console.log(e)})}(e(this).prev())}),e("body").on("click",".efb-tbl-col-shortcode",function(t){var o=e("<input>");e("body").append(o);var r=e(this).text();o.val(r).select(),document.execCommand("copy"),o.remove(),Formeo.dom.toaster(M.util.get_string("shortcodecoppied","local_edwiserform",r))})})}}});
//# sourceMappingURL=form_list.min.js.map
